#
# Blog List API Test Requests
#
# Requires: VS Code REST Client extension
# Base URL: http://localhost:3002 (as configured in .env and index.js)
#

####### Ex 4.15 - 4.23

### Base URL for our API
@baseUrl = http://localhost:3002

### Variable to store auth token after login
# Tokens are received in quots ("token"). Howver they are copied here directly (token).
# Example: @authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE2NzEwMDAwMDAsImV4cCI6MTY3MTAwMzYwMH0.signature
@authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InNlZWRlZGF1dGhvcjEiLCJpZCI6IjY5MDM3YTEzNWQ3NGY3NjY5N2JmYjg3ZSIsImlhdCI6MTc2MzU5NjUzNX0.wDBGcNGah_txtjpTuOrRvtOQlD2_gSOnAagTo3QEqKI
# Every time we receive a new token, in a response, we need to copy that token to my @authToken variable for further transactions to work


### Create new users api/users. Users have a username, password and name.
POST {{baseUrl}}/api/users
Content-Type: application/json

{
"username": "rest-client-user4",
"name": "RestClient User4",
"password": "user4password"
}

### Get list of all users from the database.

GET {{baseUrl}}/api/users


### Get all blogs

GET {{baseUrl}}/api/blogs


### 1. LOGIN to get a valid Token (Run this before post new blog or delete blog)
# Place the token in the @authToken variable.
POST {{baseUrl}}/api/login
Content-Type: application/json

{
    "username": "seededauthor1",
    "password": "password1234"
}


### LOGIN Example (Requires successful user creation first)
POST {{baseUrl}}/api/login
Content-Type: application/json

{
    "username": "rest-client-user3",
    "password": "user3password"
}


### Create a New Blog (Requires Authentication/Token)
POST {{baseUrl}}/api/blogs
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "title": "REST Client with JWT Authentication Blog Post 22",
  "url": "http://example.com/rest-client-post-jwt/22",
  "likes": 10,
  "userId": "6900cef23f7621b9d21497ec"
}

### Like Blog: increment the blog's like count
@blogIdToLike = 69037a135d74f76697bfb882
PUT {{baseUrl}}/api/blogs/{{blogIdToLike}}/like
Content-Type: application/json


### Delete a Blog
@blogIdToDelete = 691e5925f6e0d28925877c7c
DELETE {{baseUrl}}/api/blogs/{{blogIdToDelete}}
Content-Type: application/json
Authorization: Bearer {{authToken}}

